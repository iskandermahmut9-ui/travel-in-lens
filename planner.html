<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ | Travel-in-Lens</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="css/planner.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&family=Russo+One&display=swap" rel="stylesheet">
</head>
<body>

<header class="header">
    <div class="header-left">
        <a href="https://travel-in-lens.ru/" class="logo">–ü–£–¢–ï–®–ï–°–¢–í–ò–ï –í –û–ë–™–ï–ö–¢–ò–í–ï üé•</a>
    </div>
    <div class="header-center"></div>
    <div class="header-right">
        <div id="user-panel" class="user-panel">
            <button class="tool-btn" id="btn-routes" title="–ú–æ–∏ –º–∞—Ä—à—Ä—É—Ç—ã"><i class="fa-solid fa-folder-open"></i></button>
            <button class="tool-btn" id="btn-mobile-settings" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏"><i class="fa-solid fa-gear"></i></button>
            <button class="tool-btn" id="btn-save-modal" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"><i class="fa-solid fa-cloud-arrow-up"></i></button>
            <button class="tool-btn" id="btn-download-img" title="–°–∫–∞—á–∞—Ç—å JPG"><i class="fa-solid fa-image"></i></button>
            <button class="tool-btn" id="btn-export" title="–°–∫–∞—á–∞—Ç—å PDF"><i class="fa-solid fa-file-pdf"></i></button>
            <button class="tool-btn" id="btn-logout" title="–í—ã—Ö–æ–¥"><i class="fa-solid fa-sign-out"></i></button>
        </div>
        <button id="btn-pro-auth" class="btn-pro">PRO –í–•–û–î</button>
        <a href="https://travel-in-lens.ru/" class="btn-home-style"><i class="fa-solid fa-house"></i><span>–ù–ê –ì–õ–ê–í–ù–£–Æ</span></a>
    </div>
</header>

<div class="transport-tabs">
    <div class="tab active">–ê–í–¢–û–ú–û–ë–ò–õ–¨</div>
    <div class="tab">–ü–û–ï–ó–î</div>
    <div class="tab">–°–ê–ú–û–õ–ï–¢</div>
</div>

<div class="main-container">
    <div class="sidebar">
        <div class="settings-col" id="settings-panel">
            <button class="settings-close-btn" id="btn-close-settings">–ó–∞–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <div>
                <h3>–ê–≤—Ç–æ–º–æ–±–∏–ª—å</h3>
                <div class="input-group"><label>–†–ê–°–•–û–î (–õ/100–ö–ú)</label><input type="number" id="g-consumption" value="10"></div>
                <div class="input-group"><label>–¢–û–ü–õ–ò–í–û (‚ÇΩ/–õ)</label><input type="number" id="g-fuel" value="55"></div>
                <div class="input-group"><label>–õ–Æ–î–ï–ô (–ß–ï–õ)</label><input type="number" id="g-people" value="2" min="1"></div>
            </div>
            <div>
                <h3>–ë–∞–∑–æ–≤—ã–µ —Ü–µ–Ω—ã</h3>
                <div class="input-group"><label>–ñ–ò–õ–¨–ï (–°–£–¢–ö–ò)</label><input type="number" id="g-stay" value="3000"></div>
                <div class="input-group"><label>–ï–î–ê (–î–ï–ù–¨/–ß–ï–õ)</label><input type="number" id="g-food" value="1500"></div>
                <div class="input-group"><label>–≠–ö–°–ö–£–†–°–ò–Ø (–ß–ï–õ)</label><input type="number" id="g-excursions" value="1000"></div>
                <div class="input-group"><label>–°–£–í–ï–ù–ò–†–´ (–í–°–ï–ì–û)</label><input type="number" id="g-souvenirs" value="2000"></div>
            </div>
        </div>

        <div class="route-col">
            <div class="route-list-scroll" id="route-container">
                <div class="route-header-block"><h2>–ú–∞—Ä—à—Ä—É—Ç</h2></div>
                <div class="search-box">
                    <input type="text" id="city-search" placeholder="–î–æ–±–∞–≤–∏—Ç—å –≥–æ—Ä–æ–¥..." autocomplete="off">
                    <button class="btn-add" id="btn-add-search">+</button>
                </div>
                <div id="list-content"></div>
            </div>
            
            <div class="footer-total">
                <div class="footer-main">
                    <div style="display:flex; align-items:baseline;">
                        <span class="f-label">–ò–¢–û–ì–û:</span>
                        <span class="f-km" id="total-km">0 –∫–º</span>
                    </div>
                    <div class="f-sum" id="total-sum">0 ‚ÇΩ</div>
                </div>
                <div class="footer-details-row">
                    <div class="fd-item">‚õΩ <span id="s-fuel">0</span></div>
                    <div class="fd-item">üè† <span id="s-stay">0</span></div>
                    <div class="fd-item">üçî <span id="s-food">0</span></div>
                    <div class="fd-item">üé´ <span id="s-exc">0</span></div>
                    <div class="fd-item">üéÅ <span id="s-souv">0</span></div>
                </div>
                <div class="dev-links">
                    <a href="https://by-alex.ru/" target="_blank">¬© 2026 by AL‚ò∞X</a>
                    <a href="https://t.me/GavAlexandr" target="_blank">–°–≤—è–∑–∞—Ç—å—Å—è —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º</a>
                </div>
            </div>
        </div>
    </div>
    <div id="map"></div>
</div>

<button class="view-toggle-fab" id="fab-toggle-view" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤–∏–¥">
    <i class="fa-solid fa-map"></i>
</button>

<div id="auth-modal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-head">–í–•–û–î / –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</div>
        <input type="email" class="modal-inp" id="auth-email" placeholder="Email">
        <input type="password" class="modal-inp" id="auth-pass" placeholder="–ü–∞—Ä–æ–ª—å">
        <button class="btn-login" id="btn-login-action">–ü–†–û–î–û–õ–ñ–ò–¢–¨</button>
        <div class="close-modal" id="btn-close-auth">–û—Ç–º–µ–Ω–∞</div>
    </div>
</div>

<div id="save-modal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-head">–°–û–•–†–ê–ù–ò–¢–¨ –ú–ê–†–®–†–£–¢</div>
        <input type="text" class="modal-inp" id="route-name-inp" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞">
        <button class="btn-login" id="btn-save-confirm">–°–û–•–†–ê–ù–ò–¢–¨ –ù–û–í–´–ô</button>
        <button class="btn-login" id="btn-save-update" style="background:#444; margin-top:10px; display:none">–ü–ï–†–ï–ó–ê–ü–ò–°–ê–¢–¨</button>
        <div class="close-modal" onclick="document.getElementById('save-modal').style.display='none'">–û—Ç–º–µ–Ω–∞</div>
    </div>
</div>

<div id="routes-modal" class="modal-overlay">
    <div class="modal-box" style="width: 500px;">
        <div class="modal-head">–ú–û–ò –ú–ê–†–®–†–£–¢–´</div>
        <div class="routes-list" id="routes-list-container">
            <div style="padding:20px; color:#666">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        <div class="close-modal" id="btn-close-routes">–ó–∞–∫—Ä—ã—Ç—å</div>
    </div>
</div>

<script src="js/planner.js"></script>
</body>
</html>